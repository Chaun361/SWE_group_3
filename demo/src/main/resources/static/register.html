<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register | WEBSITE NAME</title>
    <link rel="stylesheet" href="styles.css"> 
    <link rel="stylesheet" href="css/register.css"> 
</head>
<body>

    <header class="main-header">
        <div class="logo">WEBSITE NAME</div>
        <nav class="auth-links">
            <a href="login.html" class="nav-link">Login</a>
            <a href="register.html" class="nav-link">Register</a>
        </nav>
    </header>

    <main class="register-page">
        <div class="register-box">
            <h2>Register</h2>
            
            <p id="register-message" style="text-align: center; color: #cc0000; margin-bottom: 15px; font-weight: 500; display: none;">Registration failed.</p>
            
            <form id="register-form">
                
                <div class="form-group">
                    <label for="username">Username (Email)</label>
                    <input type="email" id="username" name="username" required autocomplete="email">
                </div>
                
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required autocomplete="new-password">
                </div>
                
                <div class="form-group">
                    <label for="phone">Phone</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>

                <div class="form-group">
                    <label for="fullName">Full Name</label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>

                <div class="form-group">
                    <label for="address">Address</label>
                    <textarea id="address" name="address" rows="3" required></textarea>
                </div>
                
                <button type="submit" class="submit-btn">Submit</button>
            </form>

            <p class="register-link">
                Already have an account? <a href="login.html">Login here</a>
            </p>
        </div>
    </main>
    
    <script>
    // ใช้ Mock Logic แทนการ Fetch จริง
    const REGISTER_API = '/api/users/register'; 
    const SUCCESS_REDIRECT = 'login.html'; 

    // ฟังก์ชันตรวจสอบความว่างเปล่าและแสดง alert
    function validateForm(data) {
        const { username, password, phone, fullName, address } = data;
        
        // 1. ตรวจสอบช่องว่างทั้งหมด
        if (!username || !password || !phone || !fullName || !address) {
            alert("Registration Error: All fields are required. Please fill in all information.");
            return false;
        }

        // 2. ตรวจสอบเบอร์โทรศัพท์ต้องเป็นตัวเลข 10 หลัก
        const phoneRegex = /^\d{10}$/;
        if (!phoneRegex.test(phone)) {
            alert("Registration Error: Phone number must be exactly 10 digits and contain only numbers.");
            return false;
        }

        // 3. (Optional but good practice) ตรวจสอบความยาวรหัสผ่านเบื้องต้น
        if (password.length < 6) {
             alert("Registration Error: Password must be at least 6 characters long.");
             return false;
        }

        return true; // ผ่านการตรวจสอบทั้งหมด
    }


    document.addEventListener('DOMContentLoaded', () => {
        const registerForm = document.getElementById('register-form');
        const registerMessage = document.getElementById('register-message');

        if (registerForm) {
            registerForm.addEventListener('submit', async (e) => {
                e.preventDefault(); 
                registerMessage.style.display = 'none';

                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                const phone = document.getElementById('phone').value;
                const fullName = document.getElementById('fullName').value;
                const address = document.getElementById('address').value;

                const requestBody = { username, password, phone, fullName, address }; 

                // --- Client-side Validation ---
                if (!validateForm(requestBody)) {
                    // หาก Validation ไม่ผ่าน จะถูก alert() ในฟังก์ชัน validateForm แล้ว
                    return; 
                }
                
                // --- Mock Success Condition (ถ้า Validation ผ่าน) ---
                
                alert('Validation successful! Sending data to ' + REGISTER_API + ' (Mock API).');

                // จำลองการหน่วงเวลาของ API Call
                setTimeout(() => {
                    // Success Logic (Mock 200/201)
                    // ใน Task 7 เราได้ตั้งเงื่อนไข fail/success ใน Mock ไปแล้ว แต่ใน Task 8 เราเน้น Client Validation
                    alert('Registration Successful! Redirecting to login.html.'); 
                    window.location.href = SUCCESS_REDIRECT; 
                }, 1500);
            });
        }
    });
</script>
</body>
</html>